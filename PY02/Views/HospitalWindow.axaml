<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:PY02.ViewModels"
             xmlns:converters="clr-namespace:PY02"
             mc:Ignorable="d" d:DesignWidth="1200" d:DesignHeight="800"
             x:Class="PY02.Views.HospitalWindow"
             x:DataType="vm:HospitalViewModel"
             Background="#F4F7FC">

	<UserControl.Resources>
		<converters:TupleConverter x:Key="TupleConverter" />
	</UserControl.Resources>

	<Grid Margin="0,60,0,0" ColumnDefinitions="300, *" RowDefinitions="Auto, *">

		<Border Grid.Row="0" Grid.Column="0" Grid.RowSpan="2" Background="White" CornerRadius="8" Margin="15" BoxShadow="0 4 15 0 #D0D0D0">
			<StackPanel Margin="10" Spacing="10">
				<TextBlock Text="Registrar Paciente" FontSize="18" FontWeight="Bold" Margin="5"/>
				<TextBox Text="{Binding NewPatientName, Mode=TwoWay}" Watermark="Nombre del paciente" Margin="5,0"/>
				<TextBox Text="{Binding NewPatientSpecialty, Mode=TwoWay}" Watermark="Especialidad requerida" Margin="5,0"/>
				<TextBlock Text="Prioridad (1-3):" Margin="5,10,5,0"/>
				<NumericUpDown Value="{Binding NewPatientPriority, Mode=TwoWay}" Minimum="1" Maximum="3" Margin="5,0"/>
				<Button Command="{Binding AddPatientCommand}" Content="Agregar a Lista de Espera" Background="#0078D7" Foreground="White" CornerRadius="4" Margin="5,15,5,5"/>
				<TextBlock Text="Lista de Espera General" FontSize="18" FontWeight="Bold" Margin="5,25,5,5"/>
				<ListBox Name="GeneralWaitingList" ItemsSource="{Binding GeneralWaitingList}" Height="400" Margin="5,0" Background="Transparent">
					<ListBox.ItemTemplate>
						<DataTemplate>
							<Border Padding="10,8" CornerRadius="4">
								<StackPanel Orientation="Horizontal" Spacing="10">
									<TextBlock Text="{Binding Name}" FontWeight="SemiBold"/>
									<TextBlock Text="{Binding SpecialtyRequired}" Foreground="Gray"/>
								</StackPanel>
							</Border>
						</DataTemplate>
					</ListBox.ItemTemplate>
				</ListBox>
			</StackPanel>
		</Border>

		<StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="20,10">
			<TextBlock Text="Estado de Consultorios" FontSize="24" FontWeight="Bold" VerticalAlignment="Center" Foreground="#333"/>
			<Button Command="{Binding AddOfficeCommand}" IsEnabled="{Binding CanAddOffice}" Content="+" FontSize="20" FontWeight="Bold" Width="40" Height="40" CornerRadius="20" Background="#0078D7" Foreground="White" BorderThickness="0" Margin="20,0,15,0"/>
		</StackPanel>

		<ScrollViewer Grid.Row="1" Grid.Column="1">
			<ItemsControl ItemsSource="{Binding Offices}">
				<ItemsControl.ItemsPanel>
					<ItemsPanelTemplate>
						<WrapPanel />
					</ItemsPanelTemplate>
				</ItemsControl.ItemsPanel>

				<ItemsControl.ItemTemplate>
					<DataTemplate>
						<Border BorderBrush="#E1E1E1" BorderThickness="1" CornerRadius="8" Margin="10" Padding="15" MinWidth="320" Background="White" BoxShadow="0 2 8 0 #E8E8E8">
							<StackPanel Spacing="8">
								<TextBlock Text="{Binding DisplayName}" FontSize="16" FontWeight="Bold" Foreground="#333"/>
								<ToggleSwitch IsChecked="{Binding Open, Mode=TwoWay}" OnContent="Abierto" OffContent="Cerrado"/>

								<TextBlock Text="Especialidades:" FontWeight="SemiBold" Foreground="#555" Margin="0,10,0,0"/>
								<ItemsControl ItemsSource="{Binding Specialties}">
									<ItemsControl.ItemTemplate>
										<DataTemplate>
											<Border Background="#E9ECEF" CornerRadius="3" Padding="8,4" Margin="2">
												<TextBlock Text="{Binding}" FontSize="12" Foreground="#495057"/>
											</Border>
										</DataTemplate>
									</ItemsControl.ItemTemplate>
									<ItemsControl.ItemsPanel>
										<ItemsPanelTemplate>
											<StackPanel Orientation="Horizontal" />
										</ItemsPanelTemplate>
									</ItemsControl.ItemsPanel>
								</ItemsControl>

								<TextBlock Text="Cola de AtenciÃ³n:" FontWeight="SemiBold" Foreground="#555" Margin="0,10,0,0"/>
								<Border MinHeight="40" Background="#F8F9FA" BorderBrush="#E1E1E1" BorderThickness="1" CornerRadius="4">
									<ItemsControl ItemsSource="{Binding PatientQueue}">
										<ItemsControl.ItemsPanel>
											<ItemsPanelTemplate>
												<StackPanel Orientation="Horizontal" Margin="5" />
											</ItemsPanelTemplate>
										</ItemsControl.ItemsPanel>
										<ItemsControl.ItemTemplate>
											<DataTemplate>
												<Border Background="#D1ECF1" CornerRadius="3" Padding="8,4" Margin="3">
													<TextBlock Text="{Binding Name}" Foreground="#0C5460"/>
												</Border>
											</DataTemplate>
										</ItemsControl.ItemTemplate>
									</ItemsControl>
								</Border>
							</StackPanel>
						</Border>
					</DataTemplate>
				</ItemsControl.ItemTemplate>
			</ItemsControl>
		</ScrollViewer>
	</Grid>
</UserControl>
